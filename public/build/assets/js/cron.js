!function(c){for(var r={initial:"* * * * *",minuteOpts:{minWidth:100,itemWidth:30,columns:4,rows:void 0,title:"Minutes Past the Hour"},timeHourOpts:{minWidth:100,itemWidth:20,columns:2,rows:void 0,title:"Time: Hour"},domOpts:{minWidth:100,itemWidth:30,columns:void 0,rows:10,title:"Day of Month"},monthOpts:{minWidth:100,itemWidth:100,columns:2,rows:void 0,title:void 0},dowOpts:{minWidth:100,itemWidth:void 0,columns:void 0,rows:void 0,title:void 0},timeMinuteOpts:{minWidth:100,itemWidth:20,columns:4,rows:void 0,title:"Time: Minute"},effectOpts:{openSpeed:400,closeSpeed:400,openEffect:"slide",closeEffect:"slide",hideOnMouseOut:!0},url_set:void 0,customValues:void 0,onChange:void 0,useGentleSelect:!1},l="",e=0;e<60;e++)l+="<option value='"+e+"'>"+(e<10?"0":"")+e+"</option>\n";for(var d="",e=0;e<24;e++)d+="<option value='"+e+"'>"+(e<10?"0":"")+e+"</option>\n";for(var u="",e=1;e<32;e++)u+="<option value='"+e+"'>"+e+(1==e||21==e||31==e?"st":2==e||22==e?"nd":3==e||23==e?"rd":"th")+"</option>\n";for(var m="",t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=0;e<t.length;e++)m+="<option value='"+(e+1)+"'>"+t[e]+"</option>\n";for(var h="",n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=0;e<n.length;e++)h+="<option value='"+e+"'>"+n[e]+"</option>\n";for(var p="",i=["minute","hour","day","week","month","year"],e=0;e<i.length;e++)p+="<option value='"+i[e]+"'>"+i[e]+"</option>\n";var f={minute:[],hour:["mins"],day:["time"],week:["dow","time"],month:["dom","time"],year:["dom","month","time"]},v={minute:/^(\*\s){4}\*$/,hour:/^\d{1,2}\s(\*\s){3}\*$/,day:/^(\d{1,2}\s){2}(\*\s){2}\*$/,week:/^(\d{1,2}\s){2}(\*\s){2}\d{1,2}$/,month:/^(\d{1,2}\s){3}\*\s\*$/,year:/^(\d{1,2}\s){4}\*$/};function y(e){return void 0!==e}function b(e,t){if(y(t.customValues))for(key in t.customValues)if(e==t.customValues[key])return key;if("string"==typeof e&&/^((\d{1,2}|\*)\s){4}(\d{1,2}|\*)$/.test(e)){for(var n,i=e.split(" "),a=[0,0,1,1,0],s=[59,23,31,12,6],r=0;r<i.length;r++)if("*"!=i[r]){var l=parseInt(i[r]);if(!(y(l)&&l<=s[r]&&a[r]<=l))return void c.error("cron: invalid value found (col "+(r+1)+") in "+o.initial)}for(n in v)if(v[n].test(e))return n;c.error("cron: valid but unsupported cron format. sorry.")}else c.error("cron: invalid initial value")}function O(e,t){if(!y(b(t.initial,t)))return 1;if(y(o=t.customValues)&&"object"!=typeof o)return 1;var o;if(y(t.customValues))for(key in t.customValues)if(v.hasOwnProperty(key))return c.error("cron: reserved keyword '"+key+"' should not be used as customValues key."),1}var k={init:function(e){var t=e||{},o=c.extend([],r,t),n=c.extend({},r.effectOpts,t.effectOpts);if(c.extend(o,{minuteOpts:c.extend({},r.minuteOpts,n,t.minuteOpts),domOpts:c.extend({},r.domOpts,n,t.domOpts),monthOpts:c.extend({},r.monthOpts,n,t.monthOpts),dowOpts:c.extend({},r.dowOpts,n,t.dowOpts),timeHourOpts:c.extend({},r.timeHourOpts,n,t.timeHourOpts),timeMinuteOpts:c.extend({},r.timeMinuteOpts,n,t.timeMinuteOpts)}),O(0,o))return this;var e=[],i="",a=o.customValues;if(y(a))for(var s in a)i+="<option value='"+a[s]+"'>"+s+"</option>\n";e.period=c("<span class='cron-period'>Every <select name='cron-period'>"+i+p+"</select> </span>").appendTo(this).data("root",this);t=e.period.find("select");return t.bind("change.cron",g.periodChanged).data("root",this),o.useGentleSelect&&t.gentleSelect(n),e.dom=c("<span class='cron-block cron-block-dom'> on the <select name='cron-dom'>"+u+"</select> </span>").appendTo(this).data("root",this),t=e.dom.find("select").data("root",this),o.useGentleSelect&&t.gentleSelect(o.domOpts),e.month=c("<span class='cron-block cron-block-month'> of <select name='cron-month'>"+m+"</select> </span>").appendTo(this).data("root",this),t=e.month.find("select").data("root",this),o.useGentleSelect&&t.gentleSelect(o.monthOpts),e.mins=c("<span class='cron-block cron-block-mins'> at <select name='cron-mins'>"+l+"</select> minutes past the hour </span>").appendTo(this).data("root",this),t=e.mins.find("select").data("root",this),o.useGentleSelect&&t.gentleSelect(o.minuteOpts),e.dow=c("<span class='cron-block cron-block-dow'> on <select name='cron-dow'>"+h+"</select> </span>").appendTo(this).data("root",this),t=e.dow.find("select").data("root",this),o.useGentleSelect&&t.gentleSelect(o.dowOpts),e.time=c("<span class='cron-block cron-block-time'> at <select name='cron-time-hour' class='cron-time-hour'>"+d+"</select>:<select name='cron-time-min' class='cron-time-min'>"+l+" </span>").appendTo(this).data("root",this),t=e.time.find("select.cron-time-hour").data("root",this),o.useGentleSelect&&t.gentleSelect(o.timeHourOpts),t=e.time.find("select.cron-time-min").data("root",this),o.useGentleSelect&&t.gentleSelect(o.timeMinuteOpts),e.controls=c("<span class='cron-controls'>&laquo; save <span class='cron-button cron-button-save'></span> </span>").appendTo(this).data("root",this).find("span.cron-button-save").bind("click.cron",g.saveClicked).data("root",this).end(),this.find("select").bind("change.cron-callback",g.somethingChanged),this.data("options",o).data("block",e),this.data("current_value",o.initial),k.value.call(this,o.initial)},value:function(e){if(!e)return function(e){var t=e.data("block"),o=hour=day=month=dow="*",n=t.period.find("select").val();switch(n){case"minute":break;case"hour":o=t.mins.find("select").val();break;case"day":o=t.time.find("select.cron-time-min").val(),hour=t.time.find("select.cron-time-hour").val();break;case"week":o=t.time.find("select.cron-time-min").val(),hour=t.time.find("select.cron-time-hour").val(),dow=t.dow.find("select").val();break;case"month":o=t.time.find("select.cron-time-min").val(),hour=t.time.find("select.cron-time-hour").val(),day=t.dom.find("select").val();break;case"year":o=t.time.find("select.cron-time-min").val(),hour=t.time.find("select.cron-time-hour").val(),day=t.dom.find("select").val(),month=t.month.find("select").val();break;default:return n}return[o,hour,day,month,dow].join(" ")}(this);var t=this.data("options"),o=this.data("block"),n=t.useGentleSelect,i=b(e,t);if(!y(i))return!1;if(y(t.customValues)&&t.customValues.hasOwnProperty(i))i=t.customValues[i];else for(var e=e.split(" "),a={mins:e[0],hour:e[1],dom:e[2],month:e[3],dow:e[4]},s=f[i],r=0;r<s.length;r++){var l,c=s[r];l="time"==c?(l=o[c].find("select.cron-time-hour").val(a.hour),n&&l.gentleSelect("update"),o[c].find("select.cron-time-min").val(a.mins)):o[c].find("select").val(a[c]),n&&l.gentleSelect("update")}i=o.period.find("select").val(i);return n&&i.gentleSelect("update"),i.trigger("change"),this}},g={periodChanged:function(){var e=c(this).data("root"),t=e.data("block"),o=(e.data("options"),c(this).val());if(e.find("span.cron-block").hide(),f.hasOwnProperty(o))for(var n=f[c(this).val()],i=0;i<n.length;i++)t[n[i]].show()},somethingChanged:function(){root=c(this).data("root"),y(root.data("options").url_set)?k.value.call(root)!=root.data("current_value")?(root.addClass("cron-changed"),root.data("block").controls.fadeIn()):(root.removeClass("cron-changed"),root.data("block").controls.fadeOut()):root.data("block").controls.hide();var e=root.data("options").onChange;y(e)&&c.isFunction(e)&&e.call(root)},saveClicked:function(){var e=c(this),t=e.data("root"),o=k.value.call(t);e.hasClass("cron-loading")||(e.addClass("cron-loading"),c.ajax({type:"POST",url:t.data("options").url_set,data:{cron:o},success:function(){t.data("current_value",o),e.removeClass("cron-loading"),o==k.value.call(t)&&(t.removeClass("cron-changed"),t.data("block").controls.fadeOut())},error:function(){alert("An error occured when submitting your request. Try again?"),e.removeClass("cron-loading")}}))}};c.fn.cron=function(e){return k[e]?k[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void c.error("Method "+e+" does not exist on jQuery.cron"):k.init.apply(this,arguments)}}(jQuery);